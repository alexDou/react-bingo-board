"use strict";(self.webpackChunkreact_bingo_board=self.webpackChunkreact_bingo_board||[]).push([[179],{6520:(e,t,n)=>{var a=n(7294),l=n(745),r=n(4509);const s=({error:e,onClose:t})=>e?a.createElement(r.Z,{visible:!0,animation:"zoom",maskAnimation:"fade",wrapClassName:"darkDialog errorDialog",closable:!!t,onClose:t,title:"App Error"},a.createElement("p",null,e.message)):null;class o extends a.Component{static getDerivedStateFromError(e){return{error:e}}constructor(e){super(e),this.state={}}componentDidCatch(e,t){}render(){return this.state.error?a.createElement(s,{error:this.state.error}):this.props.children}}const c=o,u=(0,a.createContext)({});function i(e,t){const{type:n,payload:a}=t;switch(n){case"status":return{...e,status:a.status};case"moves":return{...e,moves:[...e.moves,...a.moves]};case"error":return{...e,error:a.error};default:throw new Error(`Unhandled action type: ${n} in moveReducer`)}}const m=e=>{const t=(0,a.useReducer)(i,{status:"idle",moves:[13],error:null});return a.createElement(u.Provider,{value:t,...e})},d=(0,a.createContext)({});function p(e,t){const{type:n,payload:a}=t;if(!(n in e)||!(n in a))throw new Error(`Unhandled action type: ${n} in bingoReducer`);return{...e,...a}}const y=[[1,7,13,19,25],[5,9,13,17,21]],v=e=>{const t=(0,a.useReducer)(p,{cells:[],players:[],play:"",winners:[],openToWin:[[1,2,3,4,5],[6,7,8,9,10],[11,12,13,14,15],[16,17,18,19,20],[21,22,23,24,25],[1,6,11,16,21],[2,7,12,17,22],[3,8,13,18,23],[4,9,14,19,24],[5,10,15,20,25]],draw:!1});return a.createElement(d.Provider,{value:t,...e})},E=()=>{const e=a.useContext(d);if(!e)throw new Error("Hook useBingo has been called outside BingoContext provider");return e},h=function(e){const t=(0,a.useRef)(!1);return a.useEffect((()=>(t.current=!0,()=>{t.current=!1})),[]),a.useCallback(((...n)=>t.current?e(...n):void 0),[e])},f=e=>e.map((e=>e.replace(/[<[^>]+>/gi,"").replace(/[^ ]script:/gi,""))),w=e=>e.map((e=>[e,Math.random()])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]));let g=[[],[]];const b=()=>{const[e,t]=(0,a.useState)(!0),[,n]=E(),l=h(n),r=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useCallback)((()=>{var e,n,a,l;const o=(null===(e=r.current)||void 0===e?void 0:e.value)&&(null===(n=r.current)||void 0===n?void 0:n.value.trim().split(/\r?\n/)),c=(null===(a=s.current)||void 0===a?void 0:a.value)&&(null===(l=s.current)||void 0===l?void 0:l.value.trim().split(/\r?\n/).filter((e=>e.length>1))),u=24!==o.length||c.length<1||c.length>4;t(u),u||(g=[o,c])}),[]),c=(0,a.useCallback)(((e,t)=>{const n=(e=>[...e.slice(0,12),{idx:0,value:""},...e.splice(12)])(w(f(e).map((e=>e.length<=24?e:e.substring(0,22)+"...")).map(((e,t)=>({idx:t+1,value:e})))));const a=w(f(t));l({type:"cells",payload:{cells:n}}),l({type:"players",payload:{players:a}}),l({type:"play",payload:{play:a[0]}})}),[]),u=(0,a.useCallback)((()=>{r.current.value="wow\nauch\nboo\noops\na-ha\npsht\noh\nah\nargh\nbu-ga-ga\nd'oh\npsst\no-la-la\nkaramba\nogo\nhm\nau-ya\nyo-ho-ho\nbrr\nfuff\nmwah\nmech\npew\nyay"}),[]);return a.createElement("div",{className:"kU4nPk6iYKyWiW9y5ybP"},a.createElement("div",{className:"CwMHHXoEEJsCUQuGZgfy"},a.createElement("button",{className:"VFU0JHhSUnC4LQM7Ahja",onClick:()=>u()},"Prefill for me"),a.createElement("label",{htmlFor:"cells-values"},"24 values for your next game",a.createElement("br",null),"(",a.createElement("small",null,"separated by a new line"),")"),a.createElement("textarea",{name:"cells",ref:r,id:"cells-values",onChange:()=>o()})),a.createElement("div",{className:"FHYGhq8ASBmF8RRpcbHT"},a.createElement("label",{htmlFor:"players-values"},"Up to 4 players",a.createElement("br",null),"(",a.createElement("small",null,"separated by a new line"),")"),a.createElement("textarea",{name:"cells",ref:s,id:"players-values",onChange:()=>o()})),a.createElement("div",{className:"Y146jxePNmXwO7GLbrD5"},a.createElement("button",{type:"button",className:"NWmcwq5PSltEsxomJG8h",disabled:e,onClick:()=>c(g[0],g[1])},"All Set")))};var C=n(4184),k=n.n(C);const N=()=>{const e=a.useContext(u);if(!e)throw new Error("Hook useMove has been called outside MoveContext provider");return e},x=({idx:e,value:t,hit:n=!1})=>{const[l]=N(),r=k()({oM4vzU4fzfynvgCRIB66:!0,qk9FEwplCTVkmoGO5sbw:"pending"===l.status,le85jQvFu7zFXm_yC3Ka:"pending"===l.status&&n,ut7bJ3N7bxQZ3qHLDh1V:"fulfilled"===l.status&&n});return a.createElement("div",{className:r},a.createElement("div",{className:"BG8QfUP_4LWQddNKpc1o"},e),a.createElement("span",null,t))};var T=n(733),S=n.n(T);const G="l1KRrFNPsg1cM_2yVfVg",H=["😻","👏","🥂","🥁","💰","🎉","✅","🤩","💐","🍾"],M=(0,a.memo)((({name:e})=>{const[t,n]=(0,a.useState)("");return(0,a.useLayoutEffect)((()=>{const e=setInterval((()=>{const e=Math.floor(9*Math.random());n(H[e])}),500);return()=>clearInterval(e)}),[e]),a.createElement("div",{className:G},a.createElement("div",{className:"csTELf_0SQ92lOzVq6zf"},a.createElement("div",null,e),a.createElement("div",null,a.createElement("span",{className:"sONiCLbg5hJ2soUoyT2B"},t))))}));var W=n(9669);const D={endpoint:"https://www.randomnumberapi.com/api/v1.0/random",payload:{min:1,max:25,count:1}},R=n.n(W)().create({timeout:4e3,headers:{"Content-Type":"application/json"},params:D.payload}),U=e=>{let t=(new Date).getTime();for(;(new Date).getTime()<t+e;);},F=()=>{const[e,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)(!1),[r,s]=E(),[o,c]=N(),u=h(c),i=h(s);return(0,a.useEffect)((()=>{e&&(u({type:"status",payload:{status:"pending"}}),(async e=>{let t=null,n=0;for(;!t||e.includes(t[0]);)n>=1&&U(500),t=(await R.get(D.endpoint)).data,n++;return t})(o.moves).then((e=>{u({type:"moves",payload:{moves:e}}),i({type:"cells",payload:{cells:r.cells.map(((t,n)=>n===e[0]-1?{...t,hit:!0}:t))}}),((e,t,n)=>{if(e.length<4)return"pass";const a=[];for(const t of y)for(const n of t)if(!e.includes(n)){a.push(!1);break}if(a.length<y.length)return n({type:"draw",payload:{draw:!0}}),void n({type:"winners",payload:{winners:[]}});const l=Array(t.openToWin.length).fill(!0);let r=-1;for(const n of t.openToWin){r+=1;for(const t of n)if(!e.includes(t)){l[r]=!1;break}}for(;l.includes(!0);){const e=l.findIndex((e=>!0===e));l[e]=!1,n({type:"openToWin",payload:{openToWin:[...t.openToWin.slice(0,e),...t.openToWin.slice(e+1)]}}),n({type:"winners",payload:{winners:[...t.winners,t.play]}})}})([...o.moves,...e],r,i);const[n,...a]=r.players,l=[...a,n];i({type:"players",payload:{players:l}}),i({type:"play",payload:{play:l[0]}}),u({type:"status",payload:{status:"fulfilled"}}),t(!1)})).catch((e=>{u({type:"error",payload:{error:e}}),t(!1)})))}),[e]),(0,a.useEffect)((()=>{if(r.winners.length>=1){l(!0);const e=setTimeout((()=>{l(!1)}),5500);return()=>clearTimeout(e)}}),[r.winners.length]),(r.draw||o.moves.length-1>=16)&&!n?a.createElement("div",{className:G},a.createElement("div",{className:"UZOQ5qFVDjDH7ftJPtHV"},a.createElement("span",null,r.draw?"Draw":"Game"),a.createElement("span",null,r.draw?"Game":"Over"))):n?a.createElement(M,{name:r.winners[r.winners.length-1]}):a.createElement("div",{className:G},["fulfilled","idle"].includes(o.status)&&a.createElement("div",{className:"MUQleqb0OYrKKbW9YGxk",onClick:()=>t(!0)},a.createElement("span",null,r.draw?"Draw":o.moves.length-1<16?r.play:"End of"),a.createElement("span",null,r.draw?"Game":"MOVES")),"pending"===o.status&&a.createElement(S(),{type:"cubes",color:"rgba(63, 63, 63, 1)"}))},O=()=>{const[e]=E();return a.createElement("div",{className:"H4TmzC9VO6GLJSHsGAIP"},a.createElement("div",{className:"M2GWRSi27T0E_A7cpadH"},e.cells.map(((e,t)=>12===t?a.createElement(F,{key:"center"}):a.createElement(x,{...e,key:`${e.idx}${e.value}`})))))},P=()=>{const[e]=E();return 25===e.cells.length?a.createElement(O,null):a.createElement(b,null)};(0,l.s)(document.getElementById("root")).render(a.createElement(a.StrictMode,null,a.createElement((()=>a.createElement(c,null,a.createElement(m,null,a.createElement(v,null,a.createElement(P,null))))),null)))}},e=>{var t=t=>e(e.s=t);e.O(0,[216],(()=>(t(8594),t(5666),t(5449),t(6520)))),e.O()}]);
//# sourceMappingURL=main.cf2b41cd65165c9e9cb9.js.map